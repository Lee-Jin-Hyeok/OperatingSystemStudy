## SJF [스케줄러 알고리즘]

#### 1. SJF가 무엇인가요?

SJF는 Shortest Job First의 약자로써 작업하는 시간이 짧은 프로세스를 먼저 실행한다는 뜻의
스케줄러 알고리즘이다.

SJF는 비선점형 스케줄러 알고리즘 중 대기시간이 가장 빠른데
이런 특징은 밑에서 다룰 예정이다.

#### 2. SJF의 동작 방식

SJF는 실행시간이 가장 짧은 프로세스에게 높은 우선순위를 주어서 준비 큐를 돌린다.
다음과 같이 프로세스이름, 실행시간, 도착시간이 존재하는 준비 큐가 있다고 하자.

| 프로세스이름 | 도착시간 | 실행시간 |
| :----------: | :------: | :------: |
|      A       |    0     |    5     |
|      B       |    1     |    4     |
|      C       |    2     |    2     |
|      D       |    3     |    2     |
|      E       |    4     |    4     |

위와 같이 준비 큐가 만들어져 있을 때, 다음과 같이 간트차트가 존재한다.
![OS_Study_Image6](./img/OS_Study_Image6.jpg)

각각의 프로세스가 CPU의 할당을 받는 구조는 다음과 같다.

0초일 때, 도착한 프로세스는 프로세스 A밖에 없다.
따라서 프로세스 A의 실행시간인 5초 동안 실행하게 되는데,
SJF 스케줄러 알고리즘은 비선점형 스케줄러 알고리즘이기 때문에
A가 실행하는 중간에 프로세스 B, C, D, E가 도착했음에도 불구하고 A가 끝까지 실행되게 된다.

그럼 모든 프로세스가 도착했으므로 가장 적은 실행시간 즉, 2초를 가진 프로세스는 C와 D이다.
C와 D중 더 빨리 들어온 프로세스는 프로세스 C이므로 프로세스 C를 2초간 실행한다.

다음으로 실행시간이 적은 프로세스는 프로세스 D이므로 프로세스 D를 2초간 실행한다.

실행시간이 적은 즉, 실행시간 4초를 가진 프로세는 B, E이므로 둘 중 더 빨리 들어온
프로세스 B를 실행하고 다음으로 프로세스 E를 실행한다.

이렇게 간트차트가 생성되게 된다.

##### 2-1. 평균 대기시간과 평균 반환시간 구하기

프로세스 A는 0초에 도착해서 0초에 시작하였으므로 대기시간이 0초이고,
0초에 도착하여 5초에 반환되었으므로 반환시간은 5초이다.

프로세스 B는 1초에 도착해서 9초에 시작하였으므로 대기시간이 8초이고,
1초에 도착해서 13초에 반환되었으므로 반환시간은 12초이다.

프로세스 C는 2초에 도착해서 5초에 시작하였으므로 대기시간이 3초이고,
2초에 도착해서 7초에 반환되었으므로 반환시간은 5초이다.

프로세스 D는 3초에 도착해서 7초에 시작하였으므로 대기시간이 4초이고,
3초에 도착해서 9초에 반환되었으므로 반환시간은 6초이다.

프로세스 E는 4초에 도착해서 13초에 시작하였으므로 대기시간이 9초이고,
4초에 도착해서 17초에 반환되었으므로 반환시간은 13초이다.

따라서, 평균 대기시간은 (0+8+3+4+9)/5 = 24/5이고,
평균 반환시간은 (5+12+5+6+13)/5 = 41/5이다.

#### 3. SJF의 특징

1. 작업할 시간이 가장 적은 프로세스에게 먼저 CPU의 자원을 할당 받을 기회를 준다.
2. 비선점형 스케줄러 알고리즘 중 평균 대기시간이 최소가 되는 알고리즘이다.
3. 실행시간이 긴 프로세스는 중간에 계속 실행시간이 짧은 프로세스가 들어오게 되면
   기아상태에 빠질 수 있다.
4. 어떠한 프로세스가 들어갔을 때 그 프로세스보다 짧은 실행시간을 가진 프로세스가 들어올 수 있으므로,
   프로세스의 반환시간을 예측하기 어렵다.